<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.test1.mapper.ShareBoardMapper">
	<select id="sharInfo" parameterType="hashmap" resultType="com.example.test1.model.Share">
		SELECT 
        CONTENT_ID,R.*,
	    (SELECT COUNT(DISTINCT TRUNC(t2.RESERV_DATE))
	     FROM POI t2
	     WHERE T2.RES_NUM = T.RES_NUM AND TRUNC(t2.RESERV_DATE) &lt;= TRUNC(t.RESERV_DATE)
	    ) AS day_num ,TO_CHAR(RESERV_DATE,'YYYY-MM-DD') AS day
	    ,T.RATING
		FROM POI t
        INNER JOIN RESERVATION R ON T.RES_NUM = R.RES_NUM
        WHERE R.RES_NUM = ${resNum}
		ORDER BY 
	    t.RESERV_DATE
	</select>

</mapper>




